{"ast":null,"code":"import React,{useContext}from\"react\";import{CarritoContext}from\"../context/CarritoContext\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Carrito=()=>{const{carrito,setCarrito}=useContext(CarritoContext);// üî¢ Calcula el total acumulado del carrito\nconst calcularTotal=()=>carrito.reduce((total,producto)=>total+producto.precio*producto.cantidad,0);// üóëÔ∏è Elimina un producto por ID (tambi√©n lo elimina del backend)\nconst eliminarDelCarrito=productoId=>{const nuevoCarrito=carrito.filter(p=>p._id!==productoId);setCarrito(nuevoCarrito);axios.delete(\"http://localhost:3000/carrito/\".concat(productoId)).catch(err=>console.error(\"‚ùå Error al eliminar producto:\",err));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDED2 Carrito de Compras\"}),carrito.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Tu carrito est\\xE1 vac\\xEDo.\"}):carrito.map((producto,index)=>/*#__PURE__*/_jsxs(\"div\",{// ‚úÖ Clave √∫nica incluso si hay duplicados\nstyle:{border:\"1px solid #ccc\",padding:\"10px\",marginBottom:\"10px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:producto.nombre}),/*#__PURE__*/_jsx(\"img\",{src:producto.imagenUrl,alt:producto.nombre,width:\"100px\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Precio:\"}),\" $\",producto.precio,\" USD\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cantidad:\"}),\" \",producto.cantidad]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>eliminarDelCarrito(producto._id),children:\"\\u274C Eliminar\"})]},\"\".concat(producto._id,\"-\").concat(index))),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total a pagar: $\",calcularTotal().toFixed(2),\" $COP\"]})]});};export default Carrito;","map":{"version":3,"names":["React","useContext","CarritoContext","axios","jsx","_jsx","jsxs","_jsxs","Carrito","carrito","setCarrito","calcularTotal","reduce","total","producto","precio","cantidad","eliminarDelCarrito","productoId","nuevoCarrito","filter","p","_id","delete","concat","catch","err","console","error","children","length","map","index","style","border","padding","marginBottom","nombre","src","imagenUrl","alt","width","onClick","toFixed"],"sources":["C:/Users/David/Desktop/mi-proyecto/frontend/src/components/Carrito.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport { CarritoContext } from \"../context/CarritoContext\";\r\nimport axios from \"axios\";\r\n\r\nconst Carrito = () => {\r\n  const { carrito, setCarrito } = useContext(CarritoContext);\r\n\r\n  // üî¢ Calcula el total acumulado del carrito\r\n  const calcularTotal = () =>\r\n    carrito.reduce((total, producto) => total + producto.precio * producto.cantidad, 0);\r\n\r\n  // üóëÔ∏è Elimina un producto por ID (tambi√©n lo elimina del backend)\r\n  const eliminarDelCarrito = (productoId) => {\r\n    const nuevoCarrito = carrito.filter((p) => p._id !== productoId);\r\n    setCarrito(nuevoCarrito);\r\n\r\n    axios.delete(`http://localhost:3000/carrito/${productoId}`)\r\n      .catch(err => console.error(\"‚ùå Error al eliminar producto:\", err));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>üõí Carrito de Compras</h2>\r\n\r\n      {carrito.length === 0 ? (\r\n        <p>Tu carrito est√° vac√≠o.</p>\r\n      ) : (\r\n        carrito.map((producto, index) => (\r\n          <div\r\n            key={`${producto._id}-${index}`} // ‚úÖ Clave √∫nica incluso si hay duplicados\r\n            style={{ border: \"1px solid #ccc\", padding: \"10px\", marginBottom: \"10px\" }}\r\n          >\r\n            <h3>{producto.nombre}</h3>\r\n\r\n            {/* üì∏ Imagen del producto */}\r\n            <img src={producto.imagenUrl} alt={producto.nombre} width=\"100px\" />\r\n\r\n            <p><strong>Precio:</strong> ${producto.precio} USD</p>\r\n            <p><strong>Cantidad:</strong> {producto.cantidad}</p>\r\n\r\n            <button onClick={() => eliminarDelCarrito(producto._id)}>‚ùå Eliminar</button>\r\n          </div>\r\n        ))\r\n      )}\r\n\r\n      <h3>Total a pagar: ${calcularTotal().toFixed(2)} $COP</h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Carrito;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,UAAU,KAAQ,OAAO,CACzC,OAASC,cAAc,KAAQ,2BAA2B,CAC1D,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAAEC,OAAO,CAAEC,UAAW,CAAC,CAAGT,UAAU,CAACC,cAAc,CAAC,CAE1D;AACA,KAAM,CAAAS,aAAa,CAAGA,CAAA,GACpBF,OAAO,CAACG,MAAM,CAAC,CAACC,KAAK,CAAEC,QAAQ,GAAKD,KAAK,CAAGC,QAAQ,CAACC,MAAM,CAAGD,QAAQ,CAACE,QAAQ,CAAE,CAAC,CAAC,CAErF;AACA,KAAM,CAAAC,kBAAkB,CAAIC,UAAU,EAAK,CACzC,KAAM,CAAAC,YAAY,CAAGV,OAAO,CAACW,MAAM,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKJ,UAAU,CAAC,CAChER,UAAU,CAACS,YAAY,CAAC,CAExBhB,KAAK,CAACoB,MAAM,kCAAAC,MAAA,CAAkCN,UAAU,CAAE,CAAC,CACxDO,KAAK,CAACC,GAAG,EAAIC,OAAO,CAACC,KAAK,CAAC,+BAA+B,CAAEF,GAAG,CAAC,CAAC,CACtE,CAAC,CAED,mBACEnB,KAAA,QAAAsB,QAAA,eACExB,IAAA,OAAAwB,QAAA,CAAI,iCAAqB,CAAI,CAAC,CAE7BpB,OAAO,CAACqB,MAAM,GAAK,CAAC,cACnBzB,IAAA,MAAAwB,QAAA,CAAG,8BAAsB,CAAG,CAAC,CAE7BpB,OAAO,CAACsB,GAAG,CAAC,CAACjB,QAAQ,CAAEkB,KAAK,gBAC1BzB,KAAA,QACmC;AACjC0B,KAAK,CAAE,CAAEC,MAAM,CAAE,gBAAgB,CAAEC,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAP,QAAA,eAE3ExB,IAAA,OAAAwB,QAAA,CAAKf,QAAQ,CAACuB,MAAM,CAAK,CAAC,cAG1BhC,IAAA,QAAKiC,GAAG,CAAExB,QAAQ,CAACyB,SAAU,CAACC,GAAG,CAAE1B,QAAQ,CAACuB,MAAO,CAACI,KAAK,CAAC,OAAO,CAAE,CAAC,cAEpElC,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,WAAAwB,QAAA,CAAQ,SAAO,CAAQ,CAAC,KAAE,CAACf,QAAQ,CAACC,MAAM,CAAC,MAAI,EAAG,CAAC,cACtDR,KAAA,MAAAsB,QAAA,eAAGxB,IAAA,WAAAwB,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAACf,QAAQ,CAACE,QAAQ,EAAI,CAAC,cAErDX,IAAA,WAAQqC,OAAO,CAAEA,CAAA,GAAMzB,kBAAkB,CAACH,QAAQ,CAACQ,GAAG,CAAE,CAAAO,QAAA,CAAC,iBAAU,CAAQ,CAAC,MAAAL,MAAA,CAXpEV,QAAQ,CAACQ,GAAG,MAAAE,MAAA,CAAIQ,KAAK,CAY1B,CACN,CACF,cAEDzB,KAAA,OAAAsB,QAAA,EAAI,kBAAgB,CAAClB,aAAa,CAAC,CAAC,CAACgC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAK,EAAI,CAAC,EACvD,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}