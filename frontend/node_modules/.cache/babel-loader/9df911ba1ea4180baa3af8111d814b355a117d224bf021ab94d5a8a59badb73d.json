{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResumenPago=_ref=>{let{reference,apiUrl,pago}=_ref;const[detalle,setDetalle]=useState(pago||null);const[error,setError]=useState(false);const[cargando,setCargando]=useState(!pago);useEffect(()=>{if(pago)return;const obtenerDetalle=async()=>{try{const res=await fetch(\"\".concat(apiUrl,\"/pago/\").concat(reference));if(!res.ok)throw new Error(\"No se pudo obtener el detalle\");const data=await res.json();console.log(\"üßæ Resumen del pago:\",data);setDetalle(data);}catch(err){console.error(\"‚ùå Error obteniendo el resumen:\",err);setError(true);}finally{setCargando(false);}};obtenerDetalle();},[reference,apiUrl,pago]);if(cargando){return/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"2rem auto\",textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",style:{width:\"40px\",height:\"40px\",border:\"4px solid #ccc\",borderTop:\"4px solid #333\",borderRadius:\"50%\",animation:\"spin 1s linear infinite\"}}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n          @keyframes spin {\\n            0% { transform: rotate(0deg); }\\n            100% { transform: rotate(360deg); }\\n          }\\n        \"})]});}if(error||!detalle){return/*#__PURE__*/_jsx(\"p\",{style:{color:\"crimson\",textAlign:\"center\",marginTop:\"2rem\"},children:\"\\uD83D\\uDEA8 No se pudo cargar el resumen del pago.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"resumen-pago\",style:{marginTop:\"2rem\",textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCB Detalles del Pago\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Referencia:\"}),\" \",detalle.reference||\"‚Äî\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Estado:\"}),\" \",detalle.status||\"Desconocido\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Monto:\"}),\" \",typeof detalle.amount_in_cents===\"number\"?\"$ \".concat((detalle.amount_in_cents/100).toLocaleString(\"es-CO\",{minimumFractionDigits:2}),\" COP\"):\"No disponible\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha:\"}),\" \",detalle.createdAt?new Date(detalle.createdAt).toLocaleString(\"es-CO\"):detalle.created_at?new Date(detalle.created_at).toLocaleString(\"es-CO\"):\"No registrada\"]}),detalle.bank_name&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Banco:\"}),\" \",detalle.bank_name]}),detalle.user_email&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Correo:\"}),\" \",detalle.user_email]}),detalle.payment_method_type&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xE9todo:\"}),\" \",detalle.payment_method_type.toUpperCase()]}),typeof detalle.attempts===\"number\"&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Intentos:\"}),\" \",detalle.attempts]}),detalle.reject_reason&&/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Motivo del rechazo:\"}),\" \",detalle.reject_reason]})]}),Array.isArray(detalle.productos)&&detalle.productos.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"1.5rem\"},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDECD\\uFE0F Productos comprados\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",borderCollapse:\"collapse\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"left\"},children:\"Producto\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"right\"},children:\"Precio\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderBottom:\"1px solid #ccc\",textAlign:\"right\"},children:\"Cantidad\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:detalle.productos.map((p,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.nombre||\"‚Äî\"}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"right\"},children:typeof p.precio===\"number\"?\"$ \".concat(p.precio.toLocaleString(\"es-CO\",{minimumFractionDigits:2})):\"‚Äî\"}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"right\"},children:typeof p.cantidad===\"number\"?p.cantidad:\"‚Äî\"})]},index))})]})]})]});};export default ResumenPago;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ResumenPago","_ref","reference","apiUrl","pago","detalle","setDetalle","error","setError","cargando","setCargando","obtenerDetalle","res","fetch","concat","ok","Error","data","json","console","log","err","style","margin","textAlign","children","className","width","height","border","borderTop","borderRadius","animation","color","marginTop","status","amount_in_cents","toLocaleString","minimumFractionDigits","createdAt","Date","created_at","bank_name","user_email","payment_method_type","toUpperCase","attempts","reject_reason","Array","isArray","productos","length","borderCollapse","borderBottom","map","p","index","nombre","precio","cantidad"],"sources":["C:/Users/David/Desktop/mi-proyecto/frontend/src/components/ResumenPago.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nconst ResumenPago = ({ reference, apiUrl, pago }) => {\r\n  const [detalle, setDetalle] = useState(pago || null);\r\n  const [error, setError] = useState(false);\r\n  const [cargando, setCargando] = useState(!pago);\r\n\r\n  useEffect(() => {\r\n    if (pago) return;\r\n\r\n    const obtenerDetalle = async () => {\r\n      try {\r\n        const res = await fetch(`${apiUrl}/pago/${reference}`);\r\n        if (!res.ok) throw new Error(\"No se pudo obtener el detalle\");\r\n        const data = await res.json();\r\n        console.log(\"üßæ Resumen del pago:\", data);\r\n        setDetalle(data);\r\n      } catch (err) {\r\n        console.error(\"‚ùå Error obteniendo el resumen:\", err);\r\n        setError(true);\r\n      } finally {\r\n        setCargando(false);\r\n      }\r\n    };\r\n\r\n    obtenerDetalle();\r\n  }, [reference, apiUrl, pago]);\r\n\r\n  if (cargando) {\r\n    return (\r\n      <div style={{ margin: \"2rem auto\", textAlign: \"center\" }}>\r\n        <div className=\"spinner\" style={{\r\n          width: \"40px\",\r\n          height: \"40px\",\r\n          border: \"4px solid #ccc\",\r\n          borderTop: \"4px solid #333\",\r\n          borderRadius: \"50%\",\r\n          animation: \"spin 1s linear infinite\"\r\n        }} />\r\n        <style>{`\r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error || !detalle) {\r\n    return (\r\n      <p style={{ color: \"crimson\", textAlign: \"center\", marginTop: \"2rem\" }}>\r\n        üö® No se pudo cargar el resumen del pago.\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"resumen-pago\" style={{ marginTop: \"2rem\", textAlign: \"left\" }}>\r\n      <h3>üìã Detalles del Pago</h3>\r\n      <ul>\r\n        <li><strong>Referencia:</strong> {detalle.reference || \"‚Äî\"}</li>\r\n        <li><strong>Estado:</strong> {detalle.status || \"Desconocido\"}</li>\r\n        <li>\r\n          <strong>Monto:</strong>{\" \"}\r\n          {typeof detalle.amount_in_cents === \"number\"\r\n            ? `$ ${(detalle.amount_in_cents / 100).toLocaleString(\"es-CO\", { minimumFractionDigits: 2 })} COP`\r\n            : \"No disponible\"}\r\n        </li>\r\n        <li>\r\n          <strong>Fecha:</strong>{\" \"}\r\n          {detalle.createdAt\r\n            ? new Date(detalle.createdAt).toLocaleString(\"es-CO\")\r\n            : detalle.created_at\r\n              ? new Date(detalle.created_at).toLocaleString(\"es-CO\")\r\n              : \"No registrada\"}\r\n        </li>\r\n        {detalle.bank_name && <li><strong>Banco:</strong> {detalle.bank_name}</li>}\r\n        {detalle.user_email && <li><strong>Correo:</strong> {detalle.user_email}</li>}\r\n        {detalle.payment_method_type && (\r\n          <li><strong>M√©todo:</strong> {detalle.payment_method_type.toUpperCase()}</li>\r\n        )}\r\n        {typeof detalle.attempts === \"number\" && (\r\n          <li><strong>Intentos:</strong> {detalle.attempts}</li>\r\n        )}\r\n        {detalle.reject_reason && (\r\n          <li><strong>Motivo del rechazo:</strong> {detalle.reject_reason}</li>\r\n        )}\r\n      </ul>\r\n\r\n      {Array.isArray(detalle.productos) && detalle.productos.length > 0 && (\r\n        <div style={{ marginTop: \"1.5rem\" }}>\r\n          <h4>üõçÔ∏è Productos comprados</h4>\r\n          <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\r\n            <thead>\r\n              <tr>\r\n                <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"left\" }}>Producto</th>\r\n                <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"right\" }}>Precio</th>\r\n                <th style={{ borderBottom: \"1px solid #ccc\", textAlign: \"right\" }}>Cantidad</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {detalle.productos.map((p, index) => (\r\n                <tr key={index}>\r\n                  <td>{p.nombre || \"‚Äî\"}</td>\r\n                  <td style={{ textAlign: \"right\" }}>\r\n                    {typeof p.precio === \"number\"\r\n                      ? `$ ${p.precio.toLocaleString(\"es-CO\", { minimumFractionDigits: 2 })}`\r\n                      : \"‚Äî\"}\r\n                  </td>\r\n                  <td style={{ textAlign: \"right\" }}>\r\n                    {typeof p.cantidad === \"number\" ? p.cantidad : \"‚Äî\"}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResumenPago;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}