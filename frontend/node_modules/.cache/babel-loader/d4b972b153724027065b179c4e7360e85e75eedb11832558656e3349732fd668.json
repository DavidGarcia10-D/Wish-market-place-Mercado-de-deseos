{"ast":null,"code":"import{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import\"./Productos.css\";import{CarritoContext}from\"../context/CarritoContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Productos(_ref){let{apiUrl,categoria}=_ref;const[productos,setProductos]=useState([]);const{agregarAlCarrito}=useContext(CarritoContext);useEffect(()=>{const obtenerProductos=async()=>{try{const endpoint=categoria?\"\".concat(apiUrl,\"/api/productos/categoria/\").concat(categoria):\"\".concat(apiUrl,\"/productos\");const res=await axios.get(endpoint);setProductos(res.data);}catch(error){console.error(\"‚ùå Error al obtener productos:\",error);}};obtenerProductos();},[categoria,apiUrl]);const handleAgregar=producto=>{if(typeof agregarAlCarrito===\"function\"){agregarAlCarrito(producto);}else{console.error(\"‚ùå agregarAlCarrito no est√° definido como funci√≥n\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"contenedor-productos\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"titulo-productos\",children:categoria?\"\\uD83D\\uDECD\\uFE0F Productos de \".concat(categoria):\"üõçÔ∏è Todos los productos\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid-productos\",children:productos.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No hay productos disponibles en esta categor\\xEDa.\"}):productos.map(prod=>/*#__PURE__*/_jsxs(\"div\",{className:\"card-producto\",children:[/*#__PURE__*/_jsx(\"img\",{src:prod.imagenUrl,alt:prod.nombre,onError:e=>e.target.src=\"/imagenes/default.jpg\"}),/*#__PURE__*/_jsx(\"h3\",{children:prod.nombre}),/*#__PURE__*/_jsx(\"p\",{children:prod.descripcion}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",prod.precio.toLocaleString()]})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Stock: \",prod.stock]}),/*#__PURE__*/_jsx(\"button\",{className:\"boton-agregar\",onClick:()=>handleAgregar(prod),children:\"Agregar al carrito\"})]},prod._id))})]});}export default Productos;","map":{"version":3,"names":["useEffect","useState","useContext","axios","CarritoContext","jsx","_jsx","jsxs","_jsxs","Productos","_ref","apiUrl","categoria","productos","setProductos","agregarAlCarrito","obtenerProductos","endpoint","concat","res","get","data","error","console","handleAgregar","producto","className","children","length","map","prod","src","imagenUrl","alt","nombre","onError","e","target","descripcion","precio","toLocaleString","stock","onClick","_id"],"sources":["C:/Users/David/Desktop/mi-proyecto/frontend/src/components/Productos.jsx"],"sourcesContent":["import { useEffect, useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Productos.css\";\r\nimport { CarritoContext } from \"../context/CarritoContext\";\r\n\r\nfunction Productos({ apiUrl, categoria }) {\r\n  const [productos, setProductos] = useState([]);\r\n  const { agregarAlCarrito } = useContext(CarritoContext);\r\n\r\n  useEffect(() => {\r\n    const obtenerProductos = async () => {\r\n      try {\r\n        const endpoint = categoria\r\n          ? `${apiUrl}/api/productos/categoria/${categoria}`\r\n          : `${apiUrl}/productos`;\r\n\r\n        const res = await axios.get(endpoint);\r\n        setProductos(res.data);\r\n      } catch (error) {\r\n        console.error(\"‚ùå Error al obtener productos:\", error);\r\n      }\r\n    };\r\n\r\n    obtenerProductos();\r\n  }, [categoria, apiUrl]);\r\n\r\n  const handleAgregar = (producto) => {\r\n    if (typeof agregarAlCarrito === \"function\") {\r\n      agregarAlCarrito(producto);\r\n    } else {\r\n      console.error(\"‚ùå agregarAlCarrito no est√° definido como funci√≥n\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"contenedor-productos\">\r\n      <h2 className=\"titulo-productos\">\r\n        {categoria ? `üõçÔ∏è Productos de ${categoria}` : \"üõçÔ∏è Todos los productos\"}\r\n      </h2>\r\n\r\n      <div className=\"grid-productos\">\r\n        {productos.length === 0 ? (\r\n          <p>No hay productos disponibles en esta categor√≠a.</p>\r\n        ) : (\r\n          productos.map((prod) => (\r\n            <div key={prod._id} className=\"card-producto\">\r\n              <img\r\n                src={prod.imagenUrl}\r\n                alt={prod.nombre}\r\n                onError={(e) => (e.target.src = \"/imagenes/default.jpg\")}\r\n              />\r\n              <h3>{prod.nombre}</h3>\r\n              <p>{prod.descripcion}</p>\r\n              <p><strong>${prod.precio.toLocaleString()}</strong></p>\r\n              <p>Stock: {prod.stock}</p>\r\n              <button\r\n                className=\"boton-agregar\"\r\n                onClick={() => handleAgregar(prod)}\r\n              >\r\n                Agregar al carrito\r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Productos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}